<div class="card shadow-sm mx-auto p-3 card-materiales-permitidos">
    <div class="d-flex justify-content-between align-items-center border p-1">
        <h6 class="mx-auto m-0">Materiales permitidos Contrato</h6>
        <div class="ms-auto">
            <a class="btn btn-sm" href="{% url 'subir_masivo_actividad_epm' %}">
                <i class="fas fa-cloud-upload-alt icon-masivo-crear"></i>
            </a>
            <a class="btn btn-sm" href="{% url 'nueva_actividad_epm_form' %}">
                <i class="fa fa-plus icon-masivo-crear"></i>
            </a>
        </div>
    </div>

    <!-- Campo de búsqueda -->
    <div class="p-2">
        <input type="text" id="buscarMaterial" class="form-control form-control-sm" placeholder="Buscar material...">
    </div>

    <div class="">
        <table class="table text-center mx-2">
            <thead>
                <tr style="font-size: 13px;">
                    <th>Id</th>
                    <th>Descripción</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="tablaMateriales">
                {% for material in materiales_permitidos %}
                <tr style="font-size: 10px !important;">
                    <td>{{ material.id }}</td>
                    <td class="material-nombre">{{ material.material }}</td>
                    <td>Editar Eliminar</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-muted">No hay actividades registradas.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Script para buscar dinámicamente -->
<script>
    document.getElementById("buscarMaterial").addEventListener("keyup", function() {
        let filtro = this.value.toLowerCase();
        let filas = document.querySelectorAll("#tablaMateriales tr");

        filas.forEach(fila => {
            let material = fila.querySelector(".material-nombre").textContent.toLowerCase();
            fila.style.display = material.includes(filtro) ? "" : "none";
        });
    });
</script>
