<div class="card shadow-sm mx-auto p-3 card-materiales-permitidos">
    <div class="d-flex justify-content-between align-items-center border p-1">
        <h6 class="mx-auto m-0">Materiales Contrato</h6>
        <div class="ms-auto">
            <!-- Botón para subir materiales masivamente -->
            <a class="btn btn-sm" href="{% url 'subir_masivo_materiales' %}" data-bs-toggle="tooltip" title="Subir materiales masivamente">
                <i class="fas fa-cloud-upload-alt icon-masivo-crear"></i>
            </a>
            <!-- Botón para agregar nuevo material -->
            <a class="btn btn-sm" href="{% url 'nueva_material_form' %}" data-bs-toggle="tooltip" title="Agregar nuevo material">
                <i class="fa fa-plus icon-masivo-crear"></i>
            </a>
        </div>
    </div>

    <!-- Campo de búsqueda -->
    <div class="p-2">
        <input type="text" id="buscarMaterial" class="form-control form-control-sm" placeholder="Buscar material..." title="Buscar un material en la lista">
    </div>

    <div class="">
        <table class="table text-center mx-2">
            <thead>
                <tr style="font-size: 13px;">
                    <th title="Descripción del material">Descripción</th>
                    <th title="Acciones disponibles">Acciones</th>
                </tr>
            </thead>
            <tbody id="tablaMateriales">
                {% for material in materiales_permitidos %}
                <tr style="font-size: 13px !important;" class="text-center align-middle">
                    <td class="material-nombre" title="Material: {{ material.material }}">{{ material.material }}</td>
                    <td class="d-flex justify-content-center align-items-center gap-2 p-1">
                        <!-- Botón Editar -->
                        <a href="#" class="btn btn-outline-primary btn-sm p-0" data-bs-toggle="tooltip" title="Editar material">
                            <i class="fa-regular fa-pen-to-square fa-xs p-1"></i> <!-- fa-xs o fa-sm -->
                        </a>
                    
                        <!-- Botón Eliminar -->
                        <a href="#" class="btn btn-outline-danger btn-sm p-0" data-bs-toggle="tooltip" title="Eliminar material" data-id="{{ material.id }}"
                        onclick="eliminarMaterialContrato(this)">
                            <i class="fa-solid fa-trash-can fa-xs p-1"></i> <!-- fa-xs o fa-sm -->
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-muted" title="No hay materiales registrados">No hay actividades registradas.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<!-- Script para buscar dinámicamente -->
<script>
    document.getElementById("buscarMaterial").addEventListener("keyup", function () {
        let filtro = this.value.toLowerCase();
        let filas = document.querySelectorAll("#tablaMateriales tr");

        filas.forEach(fila => {
            let material = fila.querySelector(".material-nombre").textContent.toLowerCase();
            fila.style.display = material.includes(filtro) ? "" : "none";
        });
    });
</script>